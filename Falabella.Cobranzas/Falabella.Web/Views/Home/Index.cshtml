@using Falabella.CrossCutting
@using Falabella.CrossCutting.Enums

@{
    ViewBag.Title = "Cobranzas";
}

<div class="col-sm-6">
    <div class="widget-box transparent">
        <div class="widget-header widget-header-flat">
            <h4 class="widget-title lighter">
                <i class="ace-icon fa fa-upload orange"></i>
                Última carga
            </h4>
            <div class="widget-toolbar">
                <a href="javascript:void(0)" data-action="reload" id="linkReloadCarga">
                    <i class="ace-icon fa fa-refresh"></i>
                </a>
                <a href="#" data-action="collapse">
                    <i class="ace-icon fa fa-chevron-up"></i>
                </a>
            </div>
        </div>

        <div class="widget-body">
            <div class="widget-main no-padding">
                <table id="tableCarga" class="table table-bordered table-striped">
                    <thead class="thin-border-bottom">
                    <tr>
                        <th></th>
                        <th>Archivo</th>
                        <th>Fecha archivo</th>
                        <th>Fecha carga</th>
                        <th class="hidden-480">Duración</th>
                        <th class="hidden-480">Estado</th>
                    </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="col-sm-6">
    <div class="widget-box transparent">
        <div class="widget-header widget-header-flat">
            <h4 class="widget-title lighter">
                <i class="ace-icon fa fa-database orange"></i>
                Historial de carga <span id="spnTipoArchivo"></span> <small class="smaller-70">(últimos 60 días)</small>
            </h4>
            <div class="widget-toolbar">
                <a href="javascript:void(0)" data-action="reload" id="linkReloadHistorial">
                    <i class="ace-icon fa fa-refresh"></i>
                </a>
                <a href="#" data-action="collapse">
                    <i class="ace-icon fa fa-chevron-up"></i>
                </a>
            </div>
        </div>

        <div class="widget-body">
            <div class="widget-main no-padding">
                <table id="dtHistorial" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Fecha archivo</th>
                            <th>Fecha carga</th>
                            <th class="hidden-480">Duración</th>
                            <th class="hidden-480">Estado</th>
                        </tr>
                    </thead>
                </table>
            </div>
        </div>
    </div> 
</div>

@section scripts{
    <script type="text/javascript" src="@Url.Content("~/Content/js/DataTables/datatables.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/js/ace/ace.widget-box.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Content/js/viewsJs/home.js")"></script>

    <script type="text/javascript">
        homeJs.init({
            urlUltimaCarga: '@Url.Action("GetUltimaCargaPorArchivo", "Home")',
            urlHistorialCarga: '@Url.Action("GetHistorialCargaPorArchivo", "Home")',
            urlLanguage: '@Url.Content("~/Content/js/DataTables/languages/dataTables.es.json")',
            tipoArchivo: {
                id: @TipoArchivo.Riad.GetNumberValue(),
                nombre: '@Enum.GetName(typeof(TipoArchivo), TipoArchivo.Riad)'
            }
        });
    </script>
}